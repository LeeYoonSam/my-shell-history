# GPT 를 이용해서 추천받은 스크립트 샘플
- [4. 디렉토리를 순회하며 파일과 폴더의 개수를 출력하는 스크립트](#4-디렉토리를-순회하며-파일과-폴더의-개수를-출력하는-스크립트) 부터 Chat GPT 에게 https://github.com/koalaman/shellcheck 를 사용중이니 위반되지 않게 작성해달라고 요구사항 추가

## [1. 서버 모니터링 스크립트 예제](server-monitoring.sh)

### 기록
- mac 에서 사용중인걸 모르니 일반적인 스크립트를 작성
- `top -b -n 1` CPU 사용량 출력에서 mac 에서 지원하지 않는 옵션을 사용
    - 최종 변경 : `ps -e -o pid,command,%cpu,time | sort -nrk 3 | head`
- `free -m` 메모리 사용량 출력에서 기본적으로 설치되어 있지 않은 `free` 를 사용
    - 최종 변경 : `vm_stat` 명령어로 대체

## [2. 랜덤 패스워드 생성](generate-random-password.sh)

### 기록
- `tr` 명령어: 문자열을 변환하는 유용한 명령어입니다. 이 스크립트에서는 알파벳과 숫자를 포함한 모든 문자를 문자열에서 삭제하고 새로운 문자열을 생성하기 위해 사용됩니다.
    - `-d` 옵션은 문자열에서 특정 문자를 삭제하도록 지정하고, 
    - `-c` 옵션은 지정한 문자 집합의 보충집합을 선택합니다.
- `fold` 명령어: 긴 텍스트 라인을 자르거나 접을 때 사용하는 명령어입니다. 이 스크립트에서는 새로 생성된 비밀번호를 $length 자리씩 나누기 위해 사용됩니다.
- `head` 명령어: 파일의 처음 몇 줄을 출력하는 명령어입니다. 이 스크립트에서는 새로 생성된 비밀번호의 첫 3줄을 출력하기 위해 사용됩니다.
- `read` 명령어: 사용자 입력을 받기 위해 사용됩니다. 이 스크립트에서는 사용자가 원하는 비밀번호 길이를 입력하도록 요청하기 위해 사용됩니다.

## [3. 로또 번호 생성기](generate-lotto.sh)

### 기록
- `=~` 연산자를 사용하여 $lotto_nums 문자열에 $random_num 문자열이 포함되어 있는지 확인합니다. 

## [4. 디렉토리를 순회하며 파일과 폴더의 개수를 출력하는 스크립트](find-directory.sh)
스크립트는 다음과 같은 **shellcheck** 규칙을 준수합니다.

- shebang을 포함하여 스크립트 파일의 첫 번째 줄은 #!/bin/bash 로 시작합니다.
- 변수를 사용하기 전에 초기화합니다.
- 변수를 인용합니다.
- 대괄호([ ])로 조건문을 검사합니다.
- 함수를 호출할 때 인수를 인용합니다.
- echo 명령어에서 따옴표를 사용합니다.

스크립트는 입력 받은 디렉토리 경로에 대해 순회를 수행하며, 파일인 경우 파일 개수를 증가시키고, 
디렉토리인 경우 디렉토리 개수를 증가시킨 후 재귀호출을 수행합니다. 
마지막으로 파일과 디렉토리 개수를 출력합니다.

### 기록
- ex) "$1"/*; -> 해당 경로에 있는 path 전체 출력
    - echo ~/Downloads/*


## [5. 디렉토리, 파일명, 내용을 입력하면 해당 경로에 파일을 만들어주는 스크립트](write-file-directory.sh)

### 기록
- cat > file 에 내용을 덮어 씌운다.
    - cat > "$dirname/$filename.txt" 


## [6. 파일 복사하고 용량을 초과하면 오래된 폴더부터 삭제하는 스크립트](file-copy-delete-limit-exceeded.sh)

### 기록
- `cp`: 파일 복사 
- `du`: 디스크 사용량 통계, `-sh` 옵션으로 지정된 각 파일에 대한 항목 표시(-s), 사람이 읽을수 있도록 출력(-h)
- `cut`: 자르고 첫번째 필드(-f1), 구분자 기준으로 자르기(-d)
- `find`: 찾기
    - `-type d`: 지정된 타입인지 검사 b, c, d(irectory), f, l, p, s
    - `-maxdepth n`
        - 명령줄 인수 아래 최대 n개의 디렉토리 수준으로 내려갑니다.  최대 깊이를 기본으로 지정하면 일반적으로 평가되지 않는 표현식이라도 전체 표현식에 적용됩니다.  "-maxdepth 0"은 전체 검색을 명령줄 인수로 제한합니다.
     - `-mindepth n`
        - n보다 작은 수준에서는 테스트나 작업을 적용하지 않습니다. -mindepth 기본값을 지정하면 일반적으로 평가되지 않더라도 전체 식에 적용됩니다.  "-mindepth 1"은 명령줄 인수를 제외한 모든 인수를 처리합니다.
- `exec`: 
    - 유틸리티라는 이름의 프로그램이 종료 상태로 0 값을 반환하면 참입니다.  
    - 선택적 인수를 유틸리티에 전달할 수 있습니다.  표현식은 세미콜론(";")으로 종료해야 합니다.  
    - 셸에서 find를 호출하는 경우 셸에서 제어 연산자로 취급하는 경우 세미콜론으로 따옴표를 제어 연산자로 취급하는 경우 세미콜론을 인용해야 합니다.  
    - 유틸리티 이름이나 인수에 "{}" 문자열이 나타나면 현재 파일의 경로명으로 대체됩니다.  
    - 유틸리티는 찾기가 실행된 디렉토리에서 실행됩니다.  
    - 유틸리티와 인수는 셸 패턴 및 구조체의 추가 확장에 확장되지 않습니다.
- `rm`: 디렉토리 삭제


## [7. 파일 분류기](file-classifiers.sh)

### 기록

- `for 루프는 와일드카드(*)` 구문을 사용하여 디렉터리의 각 파일을 반복합니다. 
    - if 문은 테스트 명령의 -d 옵션을 사용하여 파일이 디렉터리인지 확인합니다. 파일이 디렉터리인 경우 루프는 계속 명령을 사용하여 다음 파일로 건너뜁니다.
- `file` 명령은 각 파일의 MIME 유형을 결정하는 데 사용됩니다. `--mime-type` 옵션은 `MIME 유형` 출력 형식을 지정하는 데 사용됩니다. `b` 옵션은 파일 이름 없이 MIME 유형만 인쇄하는 데 사용됩니다.
- `rmdir` 명령: 빈 하위 디렉터리를 삭제


## [8. 파일명 변경 - 지정한 단어를 제외하고 파일명 변경](rename-file-remove-word.sh)

### 기록
- `read` 명령은 사용자 입력을 가져오는 데 사용되며, `-a` 옵션은 입력을 단어 배열로 읽는 데 사용됩니다.
- `*.*` 패턴을 사용하여 확장자가 있는 파일에 대해서만 반복하도록 for 루프를 수정합니다. 
    - `${file##*.}` 구문을 사용하여 파일의 확장자를 가져와 파일 이름 자체와 비교합니다.
- `${new_name//$word/}` 구문을 사용하여 파일 이름에서 제외 단어를 제거하고 
- `sed` 명령을 사용하여 파일 이름의 시작과 끝에 있는 공백과 특수 문자를 모두 제거합니다.

```sh
sed 's/^[^a-zA-Z0-9]*//;s/[^a-zA-Z0-9]*$//'
```

## [9. 연락처 관리 - 연락처 추가, 삭제, 리스트](contact-list.sh)

### 기록
- `read` 명령을 사용하여 사용자에게 입력 메시지를 표시하고 변수에 저장합니다.
- `grep`을 사용하여 이름으로 연락처를 검색하고 삭제합니다.
- `awk`를 사용하여 연락처 목록에서 각 연락처의 이름과 전화번호를 추출하여 표시합니다.
- `wc` 각 파일에 대한 개행 문자, 단어 및 바이트 수를 인쇄합니다.
    - `wc -l` 파일의 개행 횟수를 출력

## [10. 가장 최근에 수정한 파일 출력](find-currently-updated-file.sh)

### 기록
- `$path` 경로의 모든 파일에 대해 수정 시간과 파일 경로를 stat 명령어를 사용하여 출력
- `sort` 명령어를 사용하여 수정 시간이 최근인 파일을 맨 위로 정렬
- `head` 명령어와 `awk` 명령어를 사용하여 최근 수정된 파일의 경로를 출력


## [11. 디렉토리 파일 정리](organizing-files.sh)

디렉토리에서 파일을 정리하는 프로세스를 자동화하는 데 도움이 되는 셸 스크립트를 작성하세요. 

이 스크립트는 사용자에게 디렉토리 경로를 입력하라는 메시지를 표시한 다음 유형별(예: 한 폴더의 모든 이미지 파일, 다른 폴더의 모든 문서 파일), 크기별(예: 한 폴더의 특정 크기 이상의 모든 파일) 또는 수정 날짜별(예: 한 폴더의 지난 주에 수정된 모든 파일)로 파일을 정리할 수 있는 옵션을 제공해야 합니다.

### 기록
- `read` 명령을 사용하여 사용자에게 디렉터리 경로를 묻는 메시지를 표시한 다음 대/소문자 문을 사용하여 유형, 크기 또는 수정한 날짜별로 파일을 정리할 수 있는 옵션을 제공합니다. 
- 정리 프로세스가 완료되면 사용자에게 원래 디렉터리에 남아 있는 파일을 삭제할 수 있는 옵션도 제공합니다.
- `stat`: 파일 상태 표시
    - `$(stat -f %z "$path")` : $path 에 해당하는 파일 크기(bytes) 정보

### Conventions
- `cd ... || exit` 로 cd 실패시에 대한 안정성을 확보
    - [SC2164 – ShellCheck Wiki](https://www.shellcheck.net/wiki/SC2164)
- `read` 사용시에 `read -r` 을 기본적으로 사용
    - `-r`: 이 옵션을 지정하면 백슬래시가 이스케이프 문자로 작동하지 않습니다.
    - [SC2162 – ShellCheck Wiki](https://www.shellcheck.net/wiki/SC2162)

### 사용방법
```sh
./organizing-files.sh
Enter directory path: /Users/ys/Downloads/organize-test2
Select organization option:
1. Organize by file type
2. Organize by file size
3. Organize by date modified
Enter option number: 2
Enter file size (in bytes): 200000
Delete remaining files in original directory? (y/n)n
Organization complete!
```
- `directory path` 를 절대 경로로 입력해야함

## [12. 디렉토리의 파일 압축(format 선택)](file-compressing-with-format.sh)

### 기록
- `tar`:
    - tar는 여러 개의 파일이나 디렉토리를 하나로 묶어 압축하는 명령어이며, `tape archive`의 약자입니다. 주로 리눅스나 유닉스 시스템에서 사용되며, 여러 개의 파일을 하나로 묶어서 전송하거나 백업할 때 자주 사용됩니다. 
    - tar 명령어에는 압축할 파일이나 디렉토리를 지정하고, 옵션을 추가하여 압축 방식이나 압축된 파일 이름 등을 지정할 수 있습니다. 
    - 일반적으로 `gzip`이나 `bzip2`와 같은 압축 프로그램과 함께 사용하여, `.tar` `.gz` `.tar` `.bz2` 와 같은 형식으로 파일을 압축합니다. tar의 주요 옵션에는 `-c, -x, -f, -v, -z, -j` 등이 있으며, 이 옵션들을 조합하여 다양한 기능을 수행할 수 있습니다.
- `select`: 
    - select는 셸 스크립트에서 옵션을 선택하는 메뉴를 만들 수 있는 셸 내장 명령어입니다. 
    - 이 명령은 사용자에게 선택 목록에서 옵션을 선택하라는 메시지를 표시하고 입력을 기다립니다. 
    - 사용자의 선택은 변수에 저장되어 스크립트에서 추가 작업을 수행하는 데 사용할 수 있습니다. 
    - select는 대화형 셸 스크립트를 만들고 사용자 입력을 자동화하는 데 유용합니다.

## [13. CSV 파일 정보 추출](extract-csv-file.sh)
이름, 이메일, 전화번호 열이 있는 CSV 파일을 읽고 성별로 정렬된 형식의 연락처 정보 목록이 포함된 텍스트 파일을 생성하는 셸 스크립트를 작성합니다. 이 스크립트는 사용자에게 CSV 파일의 경로와 출력 파일의 이름을 묻는 메시지를 표시해야 합니다.

### 참고
- [CSV 샘플](user-info.csv)


## [14. 여러 파일에서 특정 키워드가 포함된 줄 찾기](find-keyword.sh)
특정 키워드가 포함된 특정 줄을 찾기 위해 디렉토리에 있는 여러 파일을 검색해야 하는 경우가 있습니다. 이 작업은 수동으로 수행하면 시간이 오래 걸릴 수 있지만 `grep`을 사용하면 쉽게 자동화할 수 있습니다.

요구 사항:
- 여러 텍스트 파일이 포함된 디렉토리
- 검색할 키워드

### 기록
- 디렉터리에 있는 모든 텍스트 파일에서 키워드를 검색하려면 grep을 사용합니다. 
    - `r` : 모든 하위 디렉터리를 재귀적으로 검색합니다. 
    - `n` : 일치하는 각 줄의 줄 번호를 표시합니다.

## [15. 검색어를 기반으로 디렉토리 및 해당 하위 디렉토리에서 파일을 검색](search-file-by-type.sh)
`grep` 명령을 사용하여 사용자가 제공한 검색어를 기반으로 디렉토리 및 해당 하위 디렉토리에서 파일을 검색하는 예제 스크립트입니다. 또한 사용자에게 파일 이름 또는 파일 내용에 검색어가 있는 파일을 검색할지 여부를 선택하라는 메시지가 표시됩니다.

### 기록
- 사용자가 파일 이름으로 검색하기로 선택한 경우 스크립트는 `grep`과 함께 `-Ril` 옵션을 사용합니다. 
    - 이 옵션은 디렉터리 및 하위 디렉터리(-R)의 모든 파일을 재귀적으로 검색하여 검색어(-l)를 포함하고 대소문자 구분(-i)을 무시
- 사용자가 파일 콘텐츠로 검색하도록 선택한 경우 스크립트는 위와 동일한 옵션을 사용하지만 `--exclude-dir` 옵션을 사용하여 이름이 `.git` 또는 `.svn`인 디렉토리를 제외하여 버전 제어 디렉토리를 통해 검색합니다.

## [16. 파일안에 검색어가 있는지 확인](search-file.sh)
사용자에게 검색하려는 파일 이름과 검색어를 입력하라는 메시지를 표시합니다. 

### 기록
- `grep` 명령을 사용하여 파일에서 검색어를 검색합니다.
- `-q` 플래그는 `grep`이 콘솔에 아무것도 출력하지 않고 대신 성공 또는 실패 상태 코드만 반환하도록 하는 데 사용됩니다.